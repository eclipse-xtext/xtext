---
layout: documentation
title: Integration with Web Applications
part: Reference Documentation
---

# {{page.title}} {#web-integration}

Since version 2.9 Xtext offers an interface for integration of text editors in web applications. The text editors are implemented in JavaScript, and language-related services such as code completion are realized through HTTP requests to a server-side component.

## The Client {#client}

Xtext supports three JavaScript text editor libraries:

 * [Orion](http://eclipse.org/orion/)
 * [Ace](http://ace.c9.io)
 * [CodeMirror](http://codemirror.net)

The set of supported language-related services depends on which editor library is chosen, as shown in the following table.

<table class="table table-bordered">
  <thead>
    <tr>
      <th></th>
      <th>Orion</th>
      <th>Ace</th>
      <th>CodeMirror</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#content-assist">Content assist</a></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="303_runtime_concepts.html#validation">Validation</a></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="#syntax-highlighting">Syntax highlighting</a></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="#semantic-highlighting">Semantic highlighting</a></td>
      <td><div class="supported"></div></td>
      <td><div class="not-supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="#mark-occurrences">Mark occurrences</a></td>
      <td><div class="not-supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="#hover-info">Hover information</a></td>
      <td><div class="supported"></div></td>
      <td><div class="not-supported"></div></td>
      <td><div class="not-supported"></div></td>
    </tr>
    <tr>
      <td><a href="303_runtime_concepts.html#formatting">Formatting</a></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="303_runtime_concepts.html#code-generation">Code generator</a></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
    <tr>
      <td><a href="#persistence">Persistence</a></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
      <td><div class="supported"></div></td>
    </tr>
  </tbody>
</table>

The JavaScript integration of Xtext uses [RequireJS](http://requirejs.org) for managing modules and their dependencies. The main module is `xtext/xtext-orion`, `xtext/xtext-ace`, or `xtext/xtext-codemirror`, depending on which editor library is used. Examples for loading these libraries together with Xtext can be generated by the `WebIntegrationFragment` by setting the option `generateHtmlExample = true` (see [The Language Generator](302_configuration.html#generator)). A minimal setup based on [WebJars](http://webjars.org) is shown in the following listings.

#### Orion

```javascript
require.config({
    paths: {
        "text": "webjars/requirejs-text/<version>/text",
        "jquery": "webjars/jquery/<version>/jquery.min",
        "xtext/xtext-orion": "xtext/<version>/xtext-orion"
    }
});
require(["orion/code_edit/built-codeEdit-amd"], function() {
    require(["xtext/xtext-orion"], function(xtext) {
        xtext.createEditor();
    });
});
```

#### Ace

```javascript
require.config({
    paths: {
        "jquery": "webjars/jquery/<version>/jquery.min",
        "ace/ext/language_tools": "webjars/ace/<version>/src/ext-language_tools",
        "xtext/xtext-ace": "xtext/<version>/xtext-ace"
    }
});
require(["webjars/ace/<version>/src/ace"], function() {
    require(["xtext/xtext-ace"], function(xtext) {
        xtext.createEditor();
    });
});
```

#### CodeMirror

```javascript
require.config({
    paths: {
        "jquery": "webjars/jquery/<version>/jquery.min",
        "xtext/xtext-codemirror": "xtext/<version>/xtext-codemirror"
    },
    packages: [{
        name: "codemirror",
        location: "webjars/codemirror/<version>",
        main: "lib/codemirror"
    }]
});
require(["xtext/xtext-codemirror"], function(xtext) {
    xtext.createEditor();
});
```

### JavaScript API

#### `xtext.createEditor(options)`

Creates one or more editor instances and initializes Xtext services for them. The available options are described below. The return value is the created editor if exactly one was created, or an array of editors otherwise:

```javascript
var editor = xtext.createEditor();
```

For Orion the editor is not returned directly, but through a _promise_:

```javascript
xtext.createEditor().done(function(editorViewer) {
    ...
});
```

#### `xtext.createServices(editor, options)`

Initializes Xtext services for an already created editor. Use this variant if you want full control over the editor creation.

#### Options

Options can be specified with an object passed to the `createEditor` or `createServices` functions:

```javascript
xtext.createEditor({
    resourceId: "example.statemachine",
    syntaxDefinition: "xtext/ace-mode-statemachine"
});
```

Alternatively, if `createEditor` is used, options can be set as attributes of the HTML element into which the editor is created. The attribute name is derived from the JavaScript option name by converting CamelCase to hyphen-separated and prefixing with `data-editor-`, e.g. `resourceId` becomes `data-editor-resource-id`:

```html
<div id="xtext-editor"
    data-editor-resource-id="example.statemachine"
    data-editor-syntax-definition="xtext/ace-mode-statemachine"></div>
```

The following options are supported.

 * `baseUrl`
   The path segment where the Xtext service is found (default: `'/'`). See the `serviceUrl` option.
 * `contentType`
   The content type included in requests to the Xtext server. If no content type is given, the file extension in the `resourceId` option is used to determine the language.
 * `dirtyElement`
   An element into which the dirty status class is written when the editor is marked dirty; it can be either a DOM element or an ID for a DOM element.
 * `dirtyStatusClass`
   A CSS class name written into the dirtyElement when the editor is marked dirty (default: `'dirty'`).
 * `document`
   The document; if not specified, the global document is used.
 * `enableContentAssistService`
   Whether content assist should be enabled (default: `true`).
 * `enableFormattingAction`
   Whether the formatting action should be bound to the standard keystroke Ctrl+Shift+F / Cmd+Shift+F (default: `false`).
 * `enableFormattingService`
   Whether text formatting should be enabled (default: `true`).
 * `enableGeneratorService`
   Whether code generation should be enabled (default: `true`). No default keystroke is bound for the generator, so it must be triggered through JavaScript code.
 * `enableHoverService`
   Whether mouse hover information should be enabled (default: `true`).
 * `enableHighlightingService`
   Whether semantic highlighting should be enabled (default: `true`). In contrast to [syntax highlighting](#syntax-highlighting), semantic highlighting is computed on the server.
 * `enableOccurrencesService`
   Whether marking occurrences should be enabled (default: `true`).
 * `enableSaveAction`
   Whether the save action should be bound to the standard keystroke Ctrl+S / Cmd+S (default: `false`).
 * `enableValidationService`
   Whether validation should be enabled (default: `true`).
 * `loadFromServer`
   Whether to load the editor content from the server. The default value is `true` if the `resourceId` option is set and `false` otherwise.
 * `mouseHoverDelay`
   The number of milliseconds to wait after a mouse hover before the information tooltip is displayed (default: 500).
 * `parent`
   The parent element into which the editor should be created. It can be either a DOM element or an ID or class name for a DOM element (default: `'xtext-editor'`).
 * `resourceId`
   The identifier of the resource displayed in the text editor. This option is sent to the server to communicate required information on the respective resource.
 * `selectionUpdateDelay`
   The number of milliseconds to wait after a selection change before Xtext services are invoked (default: 550).
 * `sendFullText`
   Whether the full text shall be sent to the server with each request (default: `false`). Use this if you want the server to run in stateless mode. If the option is inactive, the server state is updated regularly.
 * `serviceUrl`
   The URL of the Xtext servlet. If no value is given, it is constructed using the `baseUrl` option in the form `{location.protocol}//{location.host}{baseUrl}xtext-service`.
 * `showErrorDialogs`
   Whether errors should be displayed in popup dialogs (default: `false`).
 * `syntaxDefinition`
   A path to a JS file containing a syntax definition. Set this option to `'none'` to disable syntax highlighting. See [below](#syntax-highlighting) for more details.
 * `textUpdateDelay`
   The number of milliseconds to wait after a text change before Xtext services are invoked (default: 500).
 * `xtextLang`
   The language name (usually the file extension configured for the language). This is used to set the `resourceId` and `syntaxDefinition` options if they have not been specified.

#### Invoking Services

The `createEditor` and `createServices` functions set up listeners for editor events such that most services are invoked automatically while using the editor. However, all services can also be invoked programmatically using the `xtextServices` object that is attached to each editor instance. For example, the following code saves the resource associated with the editor when the button with the ID `save-button` is clicked:

```javascript
var editor = xtext.createEditor();
$("#save-button").click(function() {
    editor.xtextServices.saveResource();
});
```

The following functions are available, provided that the respective services are enabled and supported by the employed editor library. All functions return a _promise_ that is eventually resolved to the requested data.

 * `getContentAssist()`
   Returns the content assist proposals in the format explained in the [section below](#content-assist).
 * `validate()`
   Returns the validation result. The returned object has a property `issues`, which is an array of objects with the following properties:
    * `description`: A description to be displayed to the user.
    * `severity`: one of `'error'`, `'warning'`, or `'info'`
    * `line`: the line where the issue occurs (one-based)
    * `column`: the column where the issue occurs (one-based)
    * `offset`: the character offset in the document (zero-based)
    * `length`: the length of the affected text region
 * `computeHighlighting()`
   Returns the text styling data for semantic highlighting (see the [section below](#semantic-highlighting)).
 * `getOccurrences()`
   Returns the occurrences of the element at the current cursor position (see the [section below](#mark-occurrences)).
 * `getHoverInfo()`
   Returns the hover information at the current cursor position (see the [section below](#hover-info)).
 * `format()`
   Formats the current selection (or the whole document if the selection has zero length) and returns the formatted text.
 * `generate()`
   Returns the document generated from the associated resource. If more than one document has been generated, an object with a property `documents` is returned, which is an array of objects with the properties `name`, `contentType`, and `content`.
 * `loadResource()`
   Loads the associated resource and returns an object with properties `fullText` and `dirty`. If the resource has been modified during the current session, the modified version is returned even if the page is reloaded.
 * `saveResource()`
   Saves the current state of the resource.
 * `revertResource()`
   Reverts the resource to the last saved state and returns an object with properties `fullText` and `dirty`.
 * `update()`

### Syntax Highlighting {#syntax-highlighting}

In contrast to [semantic highlighting](#semantic-highlighting), syntax highlighting can be computed purely in JavaScript without requiring a connection to the server. This is realized with the highlighting capabilities of the employed editor libraries. All three libraries offer a JavaScript API for specifying highlighting rules. The `WebIntegrationFragment` of the Xtext language generator is able to generate a highlighting specification that includes keywords and some basic tokens such as numbers and comments (see [The Language Generator](302_configuration.html#generator)). If the highlighting generated in this way is not sufficient, you can still implement the specification yourself following the documentation of the chosen editor library.

The path to the highlighting specification is set with the `syntaxDefinition` option while setting up the Xtext editor. If no value is specified for that option, it is built from the `xtextLang` option in the form `'xtext-resources/{xtextLang}-syntax'` (Orion) or `'xtext-resources/mode-{xtextLang}'` (Ace). For CodeMirror syntax highlighting is configured by registering a _mode_ and setting the `mode` option accordingly (default mode name: `'xtext/{xtextLang}'`).

## The Server {#server}

### Content Assist {#content-assist}

### Semantic Highlighting {#semantic-highlighting}

### Mark Occurrences {#mark-occurrences}

### Hover Information {#hover-info}

### Persistence {#persistence}
